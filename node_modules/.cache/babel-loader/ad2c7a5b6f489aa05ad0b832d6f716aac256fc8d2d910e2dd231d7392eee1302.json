{"ast":null,"code":"var _jsxFileName = \"/Users/nikita/Downloads/super_date_picker/src/focus_trap/focus_trap.tsx\";\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { Component } from \"react\";\nimport { FocusOn } from \"react-focus-on\";\nimport { findElementBySelectorOrRef } from \"../services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class EuiFocusTrap extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      hasBeenDisabledByClick: false\n    };\n    this.lastInterceptedEvent = null;\n    this.preventFocusExit = false;\n    this.setInitialFocus = initialFocus => {\n      if (!initialFocus) return;\n      const node = findElementBySelectorOrRef(initialFocus);\n      if (!node) return;\n      // `data-autofocus` is part of the 'react-focus-on' API\n      node.setAttribute(\"data-autofocus\", \"true\");\n    };\n    this.onMouseupOutside = e => {\n      this.removeMouseupListener();\n      // Timeout gives precedence to the consumer to initiate close if it has toggle behavior.\n      // Otherwise this event may occur first and the consumer toggle will reopen the flyout.\n      setTimeout(() => {\n        var _this$props$onClickOu, _this$props;\n        return (_this$props$onClickOu = (_this$props = this.props).onClickOutside) === null || _this$props$onClickOu === void 0 ? void 0 : _this$props$onClickOu.call(_this$props, e);\n      });\n    };\n    this.addMouseupListener = () => {\n      document.addEventListener(\"mouseup\", this.onMouseupOutside);\n      document.addEventListener(\"touchend\", this.onMouseupOutside);\n    };\n    this.removeMouseupListener = () => {\n      document.removeEventListener(\"mouseup\", this.onMouseupOutside);\n      document.removeEventListener(\"touchend\", this.onMouseupOutside);\n    };\n    this.handleOutsideClick = event => {\n      const {\n        onClickOutside,\n        clickOutsideDisables,\n        closeOnMouseup\n      } = this.props;\n      if (clickOutsideDisables) {\n        this.setState({\n          hasBeenDisabledByClick: true\n        });\n      }\n      if (onClickOutside) {\n        closeOnMouseup ? this.addMouseupListener() : onClickOutside(event);\n      }\n    };\n  }\n  componentDidMount() {\n    this.setInitialFocus(this.props.initialFocus);\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.disabled === true && this.props.disabled === false) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({\n        hasBeenDisabledByClick: false\n      });\n    }\n  }\n  componentWillUnmount() {\n    this.removeMouseupListener();\n  }\n\n  // Programmatically sets focus on a nested DOM node; optional\n\n  render() {\n    const {\n      children,\n      clickOutsideDisables,\n      disabled,\n      returnFocus,\n      noIsolation,\n      scrollLock,\n      ...rest\n    } = this.props;\n    const isDisabled = disabled || this.state.hasBeenDisabledByClick;\n    const focusOnProps = {\n      returnFocus,\n      noIsolation,\n      scrollLock,\n      enabled: !isDisabled,\n      ...rest,\n      onClickOutside: this.handleOutsideClick\n    };\n    return /*#__PURE__*/_jsxDEV(FocusOn, {\n      ...focusOnProps,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 12\n    }, this);\n  }\n}\nEuiFocusTrap.defaultProps = {\n  clickOutsideDisables: false,\n  disabled: false,\n  returnFocus: true,\n  noIsolation: true,\n  scrollLock: false\n};","map":{"version":3,"names":["Component","FocusOn","findElementBySelectorOrRef","EuiFocusTrap","state","hasBeenDisabledByClick","lastInterceptedEvent","preventFocusExit","setInitialFocus","initialFocus","node","setAttribute","onMouseupOutside","e","removeMouseupListener","setTimeout","props","onClickOutside","addMouseupListener","document","addEventListener","removeEventListener","handleOutsideClick","event","clickOutsideDisables","closeOnMouseup","setState","componentDidMount","componentDidUpdate","prevProps","disabled","componentWillUnmount","render","children","returnFocus","noIsolation","scrollLock","rest","isDisabled","focusOnProps","enabled","defaultProps"],"sources":["/Users/nikita/Downloads/super_date_picker/src/focus_trap/focus_trap.tsx"],"sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { Component, CSSProperties } from \"react\";\nimport { FocusOn } from \"react-focus-on\";\nimport { ReactFocusOnProps } from \"react-focus-on/dist/es5/types\";\n\nimport { CommonProps } from \"../common\";\nimport { findElementBySelectorOrRef, ElementTarget } from \"../services\";\n\nexport type FocusTarget = ElementTarget;\n\ninterface EuiFocusTrapInterface {\n  /**\n   * Whether `onClickOutside` should be called on mouseup instead of mousedown.\n   * This flag can be used to prevent conflicts with outside toggle buttons by delaying the closing click callback.\n   */\n  closeOnMouseup?: boolean;\n  /**\n   * Clicking outside the trap area will disable the trap\n   */\n  clickOutsideDisables?: boolean;\n  /**\n   * Reference to element that will get focus when the trap is initiated\n   */\n  initialFocus?: FocusTarget;\n  style?: CSSProperties;\n  disabled?: boolean;\n}\n\nexport interface EuiFocusTrapProps\n  extends CommonProps,\n    Omit<ReactFocusOnProps, \"enabled\">, // Inverted `disabled` prop used instead\n    EuiFocusTrapInterface {}\n\ninterface State {\n  hasBeenDisabledByClick: boolean;\n}\n\nexport class EuiFocusTrap extends Component<EuiFocusTrapProps, State> {\n  static defaultProps = {\n    clickOutsideDisables: false,\n    disabled: false,\n    returnFocus: true,\n    noIsolation: true,\n    scrollLock: false,\n  };\n\n  state: State = {\n    hasBeenDisabledByClick: false,\n  };\n\n  lastInterceptedEvent: Event | null = null;\n  preventFocusExit = false;\n\n  componentDidMount() {\n    this.setInitialFocus(this.props.initialFocus);\n  }\n\n  componentDidUpdate(prevProps: EuiFocusTrapProps) {\n    if (prevProps.disabled === true && this.props.disabled === false) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ hasBeenDisabledByClick: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeMouseupListener();\n  }\n\n  // Programmatically sets focus on a nested DOM node; optional\n  setInitialFocus = (initialFocus?: FocusTarget) => {\n    if (!initialFocus) return;\n    const node = findElementBySelectorOrRef(initialFocus);\n    if (!node) return;\n    // `data-autofocus` is part of the 'react-focus-on' API\n    node.setAttribute(\"data-autofocus\", \"true\");\n  };\n\n  onMouseupOutside = (e: MouseEvent | TouchEvent) => {\n    this.removeMouseupListener();\n    // Timeout gives precedence to the consumer to initiate close if it has toggle behavior.\n    // Otherwise this event may occur first and the consumer toggle will reopen the flyout.\n    setTimeout(() => this.props.onClickOutside?.(e));\n  };\n\n  addMouseupListener = () => {\n    document.addEventListener(\"mouseup\", this.onMouseupOutside);\n    document.addEventListener(\"touchend\", this.onMouseupOutside);\n  };\n\n  removeMouseupListener = () => {\n    document.removeEventListener(\"mouseup\", this.onMouseupOutside);\n    document.removeEventListener(\"touchend\", this.onMouseupOutside);\n  };\n\n  handleOutsideClick: ReactFocusOnProps[\"onClickOutside\"] = (event: any) => {\n    const { onClickOutside, clickOutsideDisables, closeOnMouseup } = this.props;\n    if (clickOutsideDisables) {\n      this.setState({ hasBeenDisabledByClick: true });\n    }\n\n    if (onClickOutside) {\n      closeOnMouseup ? this.addMouseupListener() : onClickOutside(event);\n    }\n  };\n\n  render() {\n    const {\n      children,\n      clickOutsideDisables,\n      disabled,\n      returnFocus,\n      noIsolation,\n      scrollLock,\n      ...rest\n    } = this.props;\n    const isDisabled = disabled || this.state.hasBeenDisabledByClick;\n    const focusOnProps = {\n      returnFocus,\n      noIsolation,\n      scrollLock,\n      enabled: !isDisabled,\n      ...rest,\n      onClickOutside: this.handleOutsideClick,\n    };\n    return <FocusOn {...focusOnProps}>{children}</FocusOn>;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}