{"ast":null,"code":"var _jsxFileName = \"/Users/nikita/Downloads/super_date_picker/src/popover/input_popover.tsx\",\n  _s = $RefreshSig$();\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { useState, useEffect, useCallback } from \"react\";\n/** @jsxImportSource @emotion/react */\nimport classnames from \"classnames\";\nimport { tabbable } from \"tabbable\";\nimport { EuiFocusTrap } from \"../focus_trap\";\nimport { EuiPopover } from \"./popover\";\nimport { EuiResizeObserver } from \"../observer/resize_observer\";\nimport { cascadingMenuKeys, useCombinedRefs, useEuiTheme } from \"../services\";\nimport { euiFormVariables } from \"../form/form.styles\";\n/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport { logicalCSS } from \"../global_styling\";\nimport { jsxDEV as _jsxDEV } from \"@emotion/react/jsx-dev-runtime\";\nexport const EuiInputPopover = _ref => {\n  _s();\n  let {\n    children,\n    className,\n    disableFocusTrap = false,\n    input,\n    fullWidth = false,\n    onPanelResize,\n    inputRef: _inputRef,\n    panelRef: _panelRef,\n    ...props\n  } = _ref;\n  const euiThemeContext = useEuiTheme();\n  const [inputEl, setInputEl] = useState(null);\n  const [inputElWidth, setInputElWidth] = useState();\n  const [panelEl, setPanelEl] = useState(null);\n  const inputRef = useCombinedRefs([setInputEl, _inputRef]);\n  const panelRef = useCombinedRefs([setPanelEl, _panelRef]);\n  const setPanelWidth = useCallback(width => {\n    if (panelEl && (!!inputElWidth || !!width)) {\n      const newWidth = !!width ? width : inputElWidth;\n      panelEl.style.width = `${newWidth}px`;\n      if (onPanelResize) {\n        onPanelResize(newWidth);\n      }\n    }\n  }, [panelEl, inputElWidth, onPanelResize]);\n  const onResize = useCallback(() => {\n    if (inputEl) {\n      const width = inputEl.getBoundingClientRect().width;\n      setInputElWidth(width);\n      setPanelWidth(width);\n    }\n  }, [inputEl, setPanelWidth]);\n  useEffect(() => {\n    onResize();\n  }, [onResize]);\n  useEffect(() => {\n    setPanelWidth();\n  }, [setPanelWidth]);\n  const onKeyDown = event => {\n    if (panelEl && event.key === cascadingMenuKeys.TAB) {\n      const tabbableItems = tabbable(panelEl).filter(el => {\n        return Array.from(el.attributes).map(el => el.name).indexOf(\"data-focus-guard\") < 0;\n      });\n      if (disableFocusTrap || tabbableItems.length && tabbableItems[tabbableItems.length - 1] === document.activeElement) {\n        props.closePopover();\n      }\n    }\n  };\n  const classes = classnames(\"euiInputPopover\", className);\n  const form = euiFormVariables(euiThemeContext);\n  return _jsxDEV(EuiPopover, {\n    css: css(fullWidth ? undefined : logicalCSS(\"max-width\", form.maxWidth)),\n    ownFocus: false,\n    button: _jsxDEV(EuiResizeObserver, {\n      onResize: onResize,\n      children: resizeRef => _jsxDEV(\"div\", {\n        ref: resizeRef,\n        children: input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 27\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this),\n    buttonRef: inputRef,\n    panelRef: panelRef,\n    className: classes,\n    ...props,\n    children: _jsxDEV(EuiFocusTrap, {\n      clickOutsideDisables: true,\n      disabled: disableFocusTrap,\n      children: _jsxDEV(\"div\", {\n        onKeyDown: onKeyDown,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(EuiInputPopover, \"Sx4s+NrpaX42VhMVBQLwcmI20os=\", false, function () {\n  return [useEuiTheme, useCombinedRefs, useCombinedRefs];\n});\n_c = EuiInputPopover;\nEuiInputPopover.defaultProps = {\n  anchorPosition: \"downLeft\",\n  attachToAnchor: true,\n  display: \"block\",\n  panelPaddingSize: \"s\"\n};\nvar _c;\n$RefreshReg$(_c, \"EuiInputPopover\");","map":{"version":3,"names":["useState","useEffect","useCallback","classnames","tabbable","EuiFocusTrap","EuiPopover","EuiResizeObserver","cascadingMenuKeys","useCombinedRefs","useEuiTheme","euiFormVariables","css","logicalCSS","EuiInputPopover","children","className","disableFocusTrap","input","fullWidth","onPanelResize","inputRef","_inputRef","panelRef","_panelRef","props","euiThemeContext","inputEl","setInputEl","inputElWidth","setInputElWidth","panelEl","setPanelEl","setPanelWidth","width","newWidth","style","onResize","getBoundingClientRect","onKeyDown","event","key","TAB","tabbableItems","filter","el","Array","from","attributes","map","name","indexOf","length","document","activeElement","closePopover","classes","form","undefined","maxWidth","resizeRef","defaultProps","anchorPosition","attachToAnchor","display","panelPaddingSize"],"sources":["/Users/nikita/Downloads/super_date_picker/src/popover/input_popover.tsx"],"sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport {\n  FunctionComponent,\n  HTMLAttributes,\n  useState,\n  useEffect,\n  useCallback,\n} from \"react\";\n/** @jsxImportSource @emotion/react */\nimport classnames from \"classnames\";\nimport { tabbable, FocusableElement } from \"tabbable\";\n\nimport { CommonProps } from \"../common\";\nimport { EuiFocusTrap } from \"../focus_trap\";\nimport { EuiPopover, EuiPopoverProps } from \"./popover\";\nimport { EuiResizeObserver } from \"../observer/resize_observer\";\nimport { cascadingMenuKeys, useCombinedRefs, useEuiTheme } from \"../services\";\nimport { euiFormVariables } from \"../form/form.styles\";\n/** @jsxImportSource @emotion/react */ import { css } from \"@emotion/react\";\nimport { logicalCSS } from \"../global_styling\";\n\nexport interface _EuiInputPopoverProps\n  extends Omit<EuiPopoverProps, \"button\" | \"buttonRef\"> {\n  disableFocusTrap?: boolean;\n  fullWidth?: boolean;\n  input: EuiPopoverProps[\"button\"];\n  inputRef?: EuiPopoverProps[\"buttonRef\"];\n  onPanelResize?: (width?: number) => void;\n}\n\nexport type EuiInputPopoverProps = CommonProps &\n  HTMLAttributes<HTMLDivElement> &\n  _EuiInputPopoverProps;\n\nexport const EuiInputPopover: FunctionComponent<EuiInputPopoverProps> = ({\n  children,\n  className,\n  disableFocusTrap = false,\n  input,\n  fullWidth = false,\n  onPanelResize,\n  inputRef: _inputRef,\n  panelRef: _panelRef,\n  ...props\n}) => {\n  const euiThemeContext = useEuiTheme();\n  const [inputEl, setInputEl] = useState<HTMLElement | null>(null);\n  const [inputElWidth, setInputElWidth] = useState<number>();\n  const [panelEl, setPanelEl] = useState<HTMLElement | null>(null);\n\n  const inputRef = useCombinedRefs([setInputEl, _inputRef]);\n  const panelRef = useCombinedRefs([setPanelEl, _panelRef]);\n\n  const setPanelWidth = useCallback(\n    (width?: number) => {\n      if (panelEl && (!!inputElWidth || !!width)) {\n        const newWidth = !!width ? width : inputElWidth;\n        panelEl.style.width = `${newWidth}px`;\n        if (onPanelResize) {\n          onPanelResize(newWidth);\n        }\n      }\n    },\n    [panelEl, inputElWidth, onPanelResize]\n  );\n  const onResize = useCallback(() => {\n    if (inputEl) {\n      const width = inputEl.getBoundingClientRect().width;\n      setInputElWidth(width);\n      setPanelWidth(width);\n    }\n  }, [inputEl, setPanelWidth]);\n  useEffect(() => {\n    onResize();\n  }, [onResize]);\n  useEffect(() => {\n    setPanelWidth();\n  }, [setPanelWidth]);\n\n  const onKeyDown = (event: React.KeyboardEvent) => {\n    if (panelEl && event.key === cascadingMenuKeys.TAB) {\n      const tabbableItems = tabbable(panelEl).filter((el: FocusableElement) => {\n        return (\n          Array.from(el.attributes)\n            .map((el) => el.name)\n            .indexOf(\"data-focus-guard\") < 0\n        );\n      });\n      if (\n        disableFocusTrap ||\n        (tabbableItems.length &&\n          tabbableItems[tabbableItems.length - 1] === document.activeElement)\n      ) {\n        props.closePopover();\n      }\n    }\n  };\n\n  const classes = classnames(\"euiInputPopover\", className);\n  const form = euiFormVariables(euiThemeContext);\n\n  return (\n    <EuiPopover\n      css={css(fullWidth ? undefined : logicalCSS(\"max-width\", form.maxWidth))}\n      ownFocus={false}\n      button={\n        <EuiResizeObserver onResize={onResize}>\n          {(resizeRef) => <div ref={resizeRef}>{input}</div>}\n        </EuiResizeObserver>\n      }\n      buttonRef={inputRef}\n      panelRef={panelRef}\n      className={classes}\n      {...props}\n    >\n      <EuiFocusTrap clickOutsideDisables={true} disabled={disableFocusTrap}>\n        <div onKeyDown={onKeyDown}>{children}</div>\n      </EuiFocusTrap>\n    </EuiPopover>\n  );\n};\n\nEuiInputPopover.defaultProps = {\n  anchorPosition: \"downLeft\",\n  attachToAnchor: true,\n  display: \"block\",\n  panelPaddingSize: \"s\",\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}