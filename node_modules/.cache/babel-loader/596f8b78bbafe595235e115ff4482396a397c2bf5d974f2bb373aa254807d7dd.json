{"ast":null,"code":"var _s = $RefreshSig$();\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { useEffect } from 'react';\nimport { EuiObserver } from '../observer';\nexport class EuiMutationObserver extends EuiObserver {\n  constructor() {\n    super(...arguments);\n    this.name = 'EuiMutationObserver';\n    this.onMutation = (records, observer) => {\n      this.props.onMutation(records, observer);\n    };\n    this.beginObserve = () => {\n      const childNode = this.childNode;\n      this.observer = makeMutationObserver(childNode, this.props.observerOptions, this.onMutation);\n    };\n  }\n}\nconst makeMutationObserver = (node, _observerOptions, callback) => {\n  // The MutationObserver polyfill used in Kibana (for Jest) implements\n  // an older spec in which specifying `attributeOldValue` or `attributeFilter`\n  // without specifying `attributes` results in a `SyntaxError`.\n  // The following logic patches the newer spec in which `attributes: true` can be\n  // implied when appropriate (`attributeOldValue` or `attributeFilter` is specified).\n  const observerOptions = {\n    ..._observerOptions\n  };\n  const needsAttributes = observerOptions.hasOwnProperty('attributeOldValue') || observerOptions.hasOwnProperty('attributeFilter');\n  if (needsAttributes && !observerOptions.hasOwnProperty('attributes')) {\n    observerOptions.attributes = true;\n  }\n  const observer = new MutationObserver(callback);\n  observer.observe(node, observerOptions);\n  return observer;\n};\nexport const useMutationObserver = (container, callback, observerOptions) => {\n  _s();\n  useEffect(() => {\n    if (container != null) {\n      const observer = makeMutationObserver(container, observerOptions, callback);\n      return () => observer.disconnect();\n    }\n  },\n  // ignore changing observerOptions\n  // eslint-disable-next-line\n  [container, callback]);\n};\n_s(useMutationObserver, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"names":["useEffect","EuiObserver","EuiMutationObserver","name","onMutation","records","observer","props","beginObserve","childNode","makeMutationObserver","observerOptions","node","_observerOptions","callback","needsAttributes","hasOwnProperty","attributes","MutationObserver","observe","useMutationObserver","container","disconnect"],"sources":["/Users/nikita/Downloads/super_date_picker/src/observer/mutation_observer/mutation_observer.ts"],"sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { ReactNode, useEffect } from 'react';\n\nimport { EuiObserver } from '../observer';\n\nexport interface EuiMutationObserverProps {\n  /**\n   * ReactNode to render as this component's content\n   */\n  children: (ref: (e: HTMLElement | null) => void) => ReactNode;\n  onMutation: MutationCallback;\n  observerOptions?: MutationObserverInit;\n}\n\nexport class EuiMutationObserver extends EuiObserver<EuiMutationObserverProps> {\n  name = 'EuiMutationObserver';\n\n  // the `onMutation` prop may change while the observer is bound, abstracting\n  // it out into a separate function means the current `onMutation` value is used\n  onMutation: MutationCallback = (records, observer) => {\n    this.props.onMutation(records, observer);\n  };\n\n  beginObserve = () => {\n    const childNode = this.childNode!;\n    this.observer = makeMutationObserver(\n      childNode,\n      this.props.observerOptions,\n      this.onMutation\n    );\n  };\n}\n\nconst makeMutationObserver = (\n  node: Element,\n  _observerOptions: MutationObserverInit | undefined,\n  callback: MutationCallback\n) => {\n  // The MutationObserver polyfill used in Kibana (for Jest) implements\n  // an older spec in which specifying `attributeOldValue` or `attributeFilter`\n  // without specifying `attributes` results in a `SyntaxError`.\n  // The following logic patches the newer spec in which `attributes: true` can be\n  // implied when appropriate (`attributeOldValue` or `attributeFilter` is specified).\n  const observerOptions: MutationObserverInit = {\n    ..._observerOptions,\n  };\n  const needsAttributes =\n    observerOptions.hasOwnProperty('attributeOldValue') ||\n    observerOptions.hasOwnProperty('attributeFilter');\n  if (needsAttributes && !observerOptions.hasOwnProperty('attributes')) {\n    observerOptions.attributes = true;\n  }\n\n  const observer = new MutationObserver(callback);\n  observer.observe(node, observerOptions);\n\n  return observer;\n};\n\nexport const useMutationObserver = (\n  container: Element | null,\n  callback: MutationCallback,\n  observerOptions?: MutationObserverInit\n) => {\n  useEffect(\n    () => {\n      if (container != null) {\n        const observer = makeMutationObserver(\n          container,\n          observerOptions,\n          callback\n        );\n        return () => observer.disconnect();\n      }\n    },\n    // ignore changing observerOptions\n    // eslint-disable-next-line\n    [container, callback]\n  );\n};\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAoBA,SAAS,QAAQ,OAAO;AAE5C,SAASC,WAAW,QAAQ,aAAa;AAWzC,OAAO,MAAMC,mBAAmB,SAASD,WAAW,CAA2B;EAAA;IAAA;IAAA,KAC7EE,IAAI,GAAG,qBAAqB;IAAA,KAI5BC,UAAU,GAAqB,CAACC,OAAO,EAAEC,QAAQ,KAAK;MACpD,IAAI,CAACC,KAAK,CAACH,UAAU,CAACC,OAAO,EAAEC,QAAQ,CAAC;IAC1C,CAAC;IAAA,KAEDE,YAAY,GAAG,MAAM;MACnB,MAAMC,SAAS,GAAG,IAAI,CAACA,SAAU;MACjC,IAAI,CAACH,QAAQ,GAAGI,oBAAoB,CAClCD,SAAS,EACT,IAAI,CAACF,KAAK,CAACI,eAAe,EAC1B,IAAI,CAACP,UAAU,CAChB;IACH,CAAC;EAAA;AACH;AAEA,MAAMM,oBAAoB,GAAG,CAC3BE,IAAa,EACbC,gBAAkD,EAClDC,QAA0B,KACvB;EACH;EACA;EACA;EACA;EACA;EACA,MAAMH,eAAqC,GAAG;IAC5C,GAAGE;EACL,CAAC;EACD,MAAME,eAAe,GACnBJ,eAAe,CAACK,cAAc,CAAC,mBAAmB,CAAC,IACnDL,eAAe,CAACK,cAAc,CAAC,iBAAiB,CAAC;EACnD,IAAID,eAAe,IAAI,CAACJ,eAAe,CAACK,cAAc,CAAC,YAAY,CAAC,EAAE;IACpEL,eAAe,CAACM,UAAU,GAAG,IAAI;EACnC;EAEA,MAAMX,QAAQ,GAAG,IAAIY,gBAAgB,CAACJ,QAAQ,CAAC;EAC/CR,QAAQ,CAACa,OAAO,CAACP,IAAI,EAAED,eAAe,CAAC;EAEvC,OAAOL,QAAQ;AACjB,CAAC;AAED,OAAO,MAAMc,mBAAmB,GAAG,CACjCC,SAAyB,EACzBP,QAA0B,EAC1BH,eAAsC,KACnC;EAAA;EACHX,SAAS,CACP,MAAM;IACJ,IAAIqB,SAAS,IAAI,IAAI,EAAE;MACrB,MAAMf,QAAQ,GAAGI,oBAAoB,CACnCW,SAAS,EACTV,eAAe,EACfG,QAAQ,CACT;MACD,OAAO,MAAMR,QAAQ,CAACgB,UAAU,EAAE;IACpC;EACF,CAAC;EACD;EACA;EACA,CAACD,SAAS,EAAEP,QAAQ,CAAC,CACtB;AACH,CAAC;AAAC,GApBWM,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}