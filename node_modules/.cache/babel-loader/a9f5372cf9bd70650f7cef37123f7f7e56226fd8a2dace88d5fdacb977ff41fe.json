{"ast":null,"code":"var _s = $RefreshSig$();\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { Children, cloneElement, useRef, useEffect, useCallback } from 'react';\nfunction isMutableRef(ref) {\n  return ref != null && ref.hasOwnProperty('current');\n}\nexport const EuiValidatableControl = _ref => {\n  _s();\n  let {\n    isInvalid,\n    children\n  } = _ref;\n  const control = useRef(null);\n  const child = Children.only(children);\n  const childRef = child.ref;\n  const replacedRef = useCallback(element => {\n    control.current = element;\n\n    // Call the original ref, if any\n    if (typeof childRef === 'function') {\n      childRef(element);\n    } else if (isMutableRef(childRef)) {\n      childRef.current = element;\n    }\n  }, [childRef]);\n  useEffect(() => {\n    if (control.current === null || typeof control.current.setCustomValidity !== 'function') {\n      return; // jsdom doesn't polyfill this for the server-side\n    }\n\n    if (isInvalid) {\n      control.current.setCustomValidity('Invalid');\n    } else {\n      control.current.setCustomValidity('');\n    }\n  });\n  return /*#__PURE__*/cloneElement(child, {\n    ref: replacedRef,\n    'aria-invalid': isInvalid\n  });\n};\n_s(EuiValidatableControl, \"OC7+agXPjobRs1EWrCPsxyaVDGo=\");\n_c = EuiValidatableControl;\nvar _c;\n$RefreshReg$(_c, \"EuiValidatableControl\");","map":{"version":3,"names":["Children","cloneElement","useRef","useEffect","useCallback","isMutableRef","ref","hasOwnProperty","EuiValidatableControl","isInvalid","children","control","child","only","childRef","replacedRef","element","current","setCustomValidity"],"sources":["/Users/nikita/Downloads/super_date_picker/src/form/validatable_control/validatable_control.tsx"],"sourcesContent":["/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport {\n  Children,\n  cloneElement,\n  MutableRefObject,\n  ReactElement,\n  Ref,\n  FunctionComponent,\n  useRef,\n  useEffect,\n  useCallback,\n} from 'react';\nimport { CommonProps } from '../../common';\n\nexport interface HTMLConstraintValidityElement extends Element {\n  setCustomValidity: (error: string) => void;\n}\n\nexport interface ReactElementWithRef extends ReactElement {\n  ref?: Ref<HTMLConstraintValidityElement>;\n}\n\nfunction isMutableRef(\n  ref?: Ref<HTMLConstraintValidityElement>\n): ref is MutableRefObject<HTMLConstraintValidityElement> {\n  return ref != null && ref.hasOwnProperty('current');\n}\n\nexport interface EuiValidatableControlProps {\n  isInvalid?: boolean;\n  /**\n   * ReactNode to render as this component's content\n   */\n  children: ReactElementWithRef;\n}\n\nexport const EuiValidatableControl: FunctionComponent<\n  CommonProps & EuiValidatableControlProps\n> = ({ isInvalid, children }) => {\n  const control = useRef<HTMLConstraintValidityElement | null>(null);\n\n  const child = Children.only(children);\n  const childRef = child.ref;\n\n  const replacedRef = useCallback(\n    (element: HTMLConstraintValidityElement) => {\n      control.current = element;\n\n      // Call the original ref, if any\n      if (typeof childRef === 'function') {\n        childRef(element);\n      } else if (isMutableRef(childRef)) {\n        childRef.current = element;\n      }\n    },\n    [childRef]\n  );\n\n  useEffect(() => {\n    if (\n      control.current === null ||\n      typeof control.current.setCustomValidity !== 'function'\n    ) {\n      return; // jsdom doesn't polyfill this for the server-side\n    }\n\n    if (isInvalid) {\n      control.current.setCustomValidity('Invalid');\n    } else {\n      control.current.setCustomValidity('');\n    }\n  });\n\n  return cloneElement(child, {\n    ref: replacedRef,\n    'aria-invalid': isInvalid,\n  });\n};\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SACEA,QAAQ,EACRC,YAAY,EAKZC,MAAM,EACNC,SAAS,EACTC,WAAW,QACN,OAAO;AAWd,SAASC,YAAY,CACnBC,GAAwC,EACgB;EACxD,OAAOA,GAAG,IAAI,IAAI,IAAIA,GAAG,CAACC,cAAc,CAAC,SAAS,CAAC;AACrD;AAUA,OAAO,MAAMC,qBAEZ,GAAG,QAA6B;EAAA;EAAA,IAA5B;IAAEC,SAAS;IAAEC;EAAS,CAAC;EAC1B,MAAMC,OAAO,GAAGT,MAAM,CAAuC,IAAI,CAAC;EAElE,MAAMU,KAAK,GAAGZ,QAAQ,CAACa,IAAI,CAACH,QAAQ,CAAC;EACrC,MAAMI,QAAQ,GAAGF,KAAK,CAACN,GAAG;EAE1B,MAAMS,WAAW,GAAGX,WAAW,CAC5BY,OAAsC,IAAK;IAC1CL,OAAO,CAACM,OAAO,GAAGD,OAAO;;IAEzB;IACA,IAAI,OAAOF,QAAQ,KAAK,UAAU,EAAE;MAClCA,QAAQ,CAACE,OAAO,CAAC;IACnB,CAAC,MAAM,IAAIX,YAAY,CAACS,QAAQ,CAAC,EAAE;MACjCA,QAAQ,CAACG,OAAO,GAAGD,OAAO;IAC5B;EACF,CAAC,EACD,CAACF,QAAQ,CAAC,CACX;EAEDX,SAAS,CAAC,MAAM;IACd,IACEQ,OAAO,CAACM,OAAO,KAAK,IAAI,IACxB,OAAON,OAAO,CAACM,OAAO,CAACC,iBAAiB,KAAK,UAAU,EACvD;MACA,OAAO,CAAC;IACV;;IAEA,IAAIT,SAAS,EAAE;MACbE,OAAO,CAACM,OAAO,CAACC,iBAAiB,CAAC,SAAS,CAAC;IAC9C,CAAC,MAAM;MACLP,OAAO,CAACM,OAAO,CAACC,iBAAiB,CAAC,EAAE,CAAC;IACvC;EACF,CAAC,CAAC;EAEF,oBAAOjB,YAAY,CAACW,KAAK,EAAE;IACzBN,GAAG,EAAES,WAAW;IAChB,cAAc,EAAEN;EAClB,CAAC,CAAC;AACJ,CAAC;AAAC,GAzCWD,qBAEZ;AAAA,KAFYA,qBAEZ;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}